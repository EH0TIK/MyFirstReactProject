{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\DIMA\\\\Desktop\\\\people\\\\ReactTestTask-MaxUser99-patch-1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport Homeworld from \"../infoComponents/Homeworld\";\nimport Films from \"../infoComponents/Films\";\nimport { fetchProps } from \"../../reduxStuff/actions\";\n\nvar InfoPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InfoPage, _React$Component);\n\n  function InfoPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, InfoPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InfoPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      fetchedRows: [\"homeworld\", \"vehicles\", \"films\"]\n    };\n\n    _this.isURL = function (val) {\n      var a = document.createElement(\"a\");\n\n      if (typeof val === \"string\") {\n        a.href = val;\n      } else if (val.length) {\n        a.href = val[0];\n      }\n\n      return a.host && a.host !== window.location.host;\n    };\n\n    _this.enrollProperties = function () {\n      var fetchedRows = _this.state.fetchedRows;\n      var obj = _this.props.obj;\n      var forbiddenProps = [\"entities\", \"created\", \"url\", \"edited\", \"species\", \"starships\"].concat(_toConsumableArray(fetchedRows));\n      return Object.keys(obj).map(function (propName) {\n        return !forbiddenProps.includes(propName) ? \"\".concat(propName, \" = \").concat(obj[propName]) : \"\";\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(InfoPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          obj = _this$props.obj,\n          fetchProperty = _this$props.fetchProperty;\n      var fetchedRows = this.state.fetchedRows;\n      var personProp = Object.keys(obj).filter(function (p) {\n        return fetchedRows.includes(p);\n      });\n      var payload = {\n        personName: obj.name\n      };\n      var isEmpty = true;\n      personProp.forEach(function (prop) {\n        if (_this2.isURL(obj[prop])) {\n          payload[prop] = obj[prop];\n          isEmpty = false;\n        }\n      });\n\n      if (!isEmpty) {\n        fetchProperty(payload);\n      }\n    }\n  }]);\n\n  return InfoPage;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    id: ownProps.match.params.id,\n    obj: state.data[ownProps.match.params.id],\n    hasVehicles: Boolean(state.data[ownProps.match.params.id].vehicles.length)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchProperty: function fetchProperty(info) {\n      return dispatch(fetchProps(info));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoPage);","map":{"version":3,"sources":["C:\\Users\\DIMA\\Desktop\\people\\ReactTestTask-MaxUser99-patch-1\\src\\components\\pages\\InfoPage.js"],"names":["React","connect","Homeworld","Films","fetchProps","InfoPage","state","fetchedRows","isURL","val","a","document","createElement","href","length","host","window","location","enrollProperties","obj","props","forbiddenProps","Object","keys","map","propName","includes","fetchProperty","personProp","filter","p","payload","personName","name","isEmpty","forEach","prop","Component","mapStateToProps","ownProps","id","match","params","data","hasVehicles","Boolean","vehicles","mapDispatchToProps","dispatch","info"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Homeworld from \"../infoComponents/Homeworld\";\r\n\r\nimport Films from \"../infoComponents/Films\";\r\nimport { fetchProps } from \"../../reduxStuff/actions\";\r\n\r\nclass InfoPage extends React.Component {\r\n  state = {\r\n    fetchedRows: [\"homeworld\", \"vehicles\", \"films\"]\r\n  };\r\n\r\n  isURL = (val) => {\r\n    const a = document.createElement(\"a\");\r\n    if (typeof val === \"string\") {\r\n      a.href = val;\r\n    } else if (val.length) {\r\n      a.href = val[0];\r\n    }\r\n    return (a.host && a.host !== window.location.host);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { obj, fetchProperty } = this.props;\r\n    const { fetchedRows } = this.state;\r\n    const personProp = Object.keys(obj).filter(p => fetchedRows.includes(p));\r\n    const payload = { personName: obj.name };\r\n    let isEmpty = true;\r\n    personProp.forEach((prop) => {\r\n      if (this.isURL(obj[prop])) {\r\n        payload[prop] = obj[prop];\r\n        isEmpty = false;\r\n      }\r\n    });\r\n    if (!isEmpty) {\r\n      fetchProperty(payload);\r\n    }\r\n  }\r\n\r\n  enrollProperties = () => {\r\n    const { fetchedRows } = this.state;\r\n    const { obj } = this.props;\r\n    const forbiddenProps = [\"entities\", \"created\", \"url\", \"edited\", \"species\", \"starships\", ...fetchedRows];\r\n    return Object.keys(obj).map(propName => (\r\n      !forbiddenProps.includes(propName)\r\n        ? `${propName} = ${obj[propName]}`\r\n        : \"\"\r\n    ));\r\n  };\r\n  }\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  id:          ownProps.match.params.id,\r\n  obj:         state.data[ownProps.match.params.id],\r\n  hasVehicles: Boolean(state.data[ownProps.match.params.id].vehicles.length)\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({ fetchProperty: info => dispatch(fetchProps(info)) });\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoPage);\r\n"]},"metadata":{},"sourceType":"module"}